"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[89],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>h});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=o.createContext({}),s=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},l=function(e){var t=s(e.components);return o.createElement(c.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,l=p(e,["components","mdxType","originalType","parentName"]),u=s(n),m=r,h=u["".concat(c,".").concat(m)]||u[m]||d[m]||a;return n?o.createElement(h,i(i({ref:t},l),{},{components:n})):o.createElement(h,i({ref:t},l))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=m;var p={};for(var c in t)hasOwnProperty.call(t,c)&&(p[c]=t[c]);p.originalType=e,p[u]="string"==typeof e?e:r,i[1]=p;for(var s=2;s<a;s++)i[s]=n[s];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},4832:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>p,toc:()=>s});var o=n(7462),r=(n(7294),n(3905));const a={},i="Prototype",p={unversionedId:"JavaScript/prototype",id:"JavaScript/prototype",title:"Prototype",description:"TL;DR",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/JavaScript/prototype.md",sourceDirName:"JavaScript",slug:"/JavaScript/prototype",permalink:"/frontendwiz/en/JavaScript/prototype",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/JavaScript/prototype.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Promise",permalink:"/frontendwiz/en/JavaScript/promise"},next:{title:"This",permalink:"/frontendwiz/en/JavaScript/this"}},c={},s=[{value:"TL;DR",id:"tldr",level:3},{value:"What is prototype",id:"what-is-prototype",level:3},{value:"What is prototype chain",id:"what-is-prototype-chain",level:3},{value:"How to get the object&#39;s prototype",id:"how-to-get-the-objects-prototype",level:3},{value:"Constructor Function",id:"constructor-function",level:3},{value:"<code>prototype</code> property",id:"prototype-property",level:4},{value:"<code>__proto__</code> vs. <code>prototype</code>",id:"__proto__-vs-prototype",level:3},{value:"<code>new</code> keyword",id:"new-keyword",level:3}],l={toc:s},u="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,o.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"prototype"},"Prototype"),(0,r.kt)("h3",{id:"tldr"},"TL;DR"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Prototypes are like parents, objects are like children, and just as children inherit genes from their parents, objects inherit properties and methods from their prototypes."),(0,r.kt)("li",{parentName:"ul"},"Use the ",(0,r.kt)("inlineCode",{parentName:"li"},"__proto__")," property or the ",(0,r.kt)("inlineCode",{parentName:"li"},"Object.getPrototypeOf()")," method to get an object's prototype."),(0,r.kt)("li",{parentName:"ul"},"A constructor function is a type of function used to create objects when called with the ",(0,r.kt)("inlineCode",{parentName:"li"},"new")," keyword."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"__proto__")," is a property of objects that points to their prototype, while ",(0,r.kt)("inlineCode",{parentName:"li"},"prototype")," is a property of functions that is used to define the properties and methods inherited by objects created with that function.")),(0,r.kt)("h3",{id:"what-is-prototype"},"What is prototype"),(0,r.kt)("p",null,"In JavaScript, every object has a prototype, which is a reference to another object that the current object inherits properties and methods from."),(0,r.kt)("p",null,"The properties and methods defined on the prototype can be accessed and used by the object."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Prototypes are like parents, objects are like children."),(0,r.kt)("p",{parentName:"admonition"},"Just as children inherit genes from their parents, objects inherit properties and methods from their prototypes.")),(0,r.kt)("h3",{id:"what-is-prototype-chain"},"What is prototype chain"),(0,r.kt)("p",null,"When accessing an object's property or method, JavaScript engine first looks for it in the object itself."),(0,r.kt)("p",null,"If it's not found there, it searches for it on the object's prototype, so on and so forth, until the end of the prototype chain is reached \uff08which is when the prototype is ",(0,r.kt)("inlineCode",{parentName:"p"},"null"),"\uff09."),(0,r.kt)("p",null,"This path of searching is called the ",(0,r.kt)("strong",{parentName:"p"},"prototype chain"),"."),(0,r.kt)("h3",{id:"how-to-get-the-objects-prototype"},"How to get the object's prototype"),(0,r.kt)("p",null,"Every object has a hidden property called ",(0,r.kt)("inlineCode",{parentName:"p"},"[[Prototype]]")," which points to its prototype."),(0,r.kt)("p",null,"However, since ",(0,r.kt)("inlineCode",{parentName:"p"},"[[Prototype]]")," cannot be directly accessed, it can be accessed through ",(0,r.kt)("inlineCode",{parentName:"p"},"__proto__")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"Object.getPrototypeOf()"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"const person = {\n  isHuman: true,\n};\n\n// create a new object and set person object as its prototype\nconst jordan = Object.create(person);\n\nconsole.log(jordan.__proto__); // { isHuman: true }\n\nconsole.log(jordan.__proto__ === Object.getPrototypeOf(jordan)); // true\n")),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"As ",(0,r.kt)("inlineCode",{parentName:"p"},"__proto__")," has been deprecated, we usually use ",(0,r.kt)("inlineCode",{parentName:"p"},"Object.getPrototypeOf()")," in practice.")),(0,r.kt)("h3",{id:"constructor-function"},"Constructor Function"),(0,r.kt)("p",null,"Actually, a constructor function is just a regular function, but it's used with the ",(0,r.kt)("inlineCode",{parentName:"p"},"new")," keyword to create objects."),(0,r.kt)("p",null,"Before ES6, JavaScript didn't have the class syntax. Instead, objects were created using constructor functions."),(0,r.kt)("p",null,"Constructor functions do not have a defined return value by default."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"function Person(name) {\n  this.isHuman = true;\n  this.name = name;\n}\n\nconst jordan = new Person('jordan');\nconsole.log(jordan); // { name: 'jordan', isHuman: true }\n")),(0,r.kt)("p",null,"However, if a custom object is returned from the constructor function, it will replace the newly created object."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"function Person(name) {\n  this.isHuman = true;\n  this.name = name;\n  return { name: 'John' }; // return a custom object\n}\n\nconst jordan = new Person('jordan');\nconsole.log(jordan); // { name: 'John' }\n")),(0,r.kt)("h4",{id:"prototype-property"},(0,r.kt)("inlineCode",{parentName:"h4"},"prototype")," property"),(0,r.kt)("p",null,"Constructor function has the ",(0,r.kt)("inlineCode",{parentName:"p"},"prototype")," property that allows objects created by the constructor function to inherit its properties or methods."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"function Person(name) {\n  this.isHuman = true;\n  this.name = name;\n}\n\nPerson.prototype.greet = function () {\n  console.log('I am ' + this.name);\n};\n\nconst jordan = new Person('jordan');\n\nconsole.log(jordan); // Person { isHuman: true, name: 'jordan' }\nconsole.log(jordan.__proto__); // { greet: \u0192, constructor: \u0192 }\nconsole.log(jordan.greet()); // I am jordan\n")),(0,r.kt)("p",null,"However, why don't we just define the properties or methods in the constructor function \ud83e\udd14"),(0,r.kt)("p",null,"The main reason is to ",(0,r.kt)("strong",{parentName:"p"},"save memory usage"),"."),(0,r.kt)("p",null,"Defining properties and methods directly in the constructor function use more memory when creating many objects, because they are recreated for each object."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"function Person(name) {\n  this.name = name;\n  // Define method directly in the constructor function\n  this.greet = function () {\n    console.log('I am ' + this.name);\n  };\n}\n\nconst jordan = new Person('jordan');\nconsole.log(jordan); // Person\xa0{ name: 'jordan', greet: \u0192 }\n")),(0,r.kt)("p",null,"By defining common properties and methods on the ",(0,r.kt)("inlineCode",{parentName:"p"},"prototype")," property, they can be shared among all instances of objects created using that constructor function, leading to better performance and memory usage."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"function Person(name) {\n  this.name = name;\n}\n\nPerson.prototype.greet = function () {\n  console.log('I am ' + this.name);\n};\n\nconst jordan = new Person('jordan');\nconsole.log(jordan); // Person { name: 'jordan' }\nconsole.log(jordan.__proto__); // { greet: \u0192, constructor: \u0192 }\n")),(0,r.kt)("h3",{id:"__proto__-vs-prototype"},(0,r.kt)("inlineCode",{parentName:"h3"},"__proto__")," vs. ",(0,r.kt)("inlineCode",{parentName:"h3"},"prototype")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"__proto__")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"A property of every object."),(0,r.kt)("li",{parentName:"ol"},"A way for an object to access its prototype chain.")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"prototype")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"A property of a function."),(0,r.kt)("li",{parentName:"ol"},"A way to add properties and methods to all objects created by that constructor function using the ",(0,r.kt)("inlineCode",{parentName:"li"},"new")," keyword.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"function Person(name) {\n  this.name = name;\n}\n\nconst jordan = new Person('jordan');\n\nconsole.log(jordan.__proto__ === Person.prototype); // true\n")),(0,r.kt)("h3",{id:"new-keyword"},(0,r.kt)("inlineCode",{parentName:"h3"},"new")," keyword"),(0,r.kt)("p",null,"To create an object, we use a constructor function with the ",(0,r.kt)("inlineCode",{parentName:"p"},"new")," keyword."),(0,r.kt)("p",null,"But, how does the ",(0,r.kt)("inlineCode",{parentName:"p"},"new")," keyword work under the hood \ud83e\udd14"),(0,r.kt)("p",null,"According to definition of ",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/new"},"MDN"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"new")," will do the following things\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Creates a empty object."),(0,r.kt)("li",{parentName:"ol"},"Sets empty object's ",(0,r.kt)("inlineCode",{parentName:"li"},"[[Prototype]]")," to constructor function's ",(0,r.kt)("inlineCode",{parentName:"li"},"prototype")),(0,r.kt)("li",{parentName:"ol"},"Executes the constructor function and binds empty object as ",(0,r.kt)("inlineCode",{parentName:"li"},"this")," context."),(0,r.kt)("li",{parentName:"ol"},"If the constructor function returns an object, the new keyword will return that object. If it doesn't, the new keyword will return the newly created empty object.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"function myNew(constructorFn, ...args) {\n  // 1. Creates a empty object\n  // 2. Sets empty object's [[Prototype]] to constructor function's prototype\n  const obj = Object.create(constructorFn.prototype);\n\n  // 3. Executes the constructor function and binds empty object as this context\n  const result = constructorFn.apply(obj, args);\n\n  // 4. If the constructor function returns an object\n  // If it does, new keyword will return that object\n  // If it doesn't, the new keyword will return the newly created empty object.\n  return result instanceof Object ? result : obj;\n}\n\nfunction Person(name) {\n  this.name = name;\n}\n\nconst jordan = myNew(Person, 'jordan'); // Person { name: 'jordan' }\n")),(0,r.kt)("p",null,"Reference\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/new"},"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/new")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"https://medium.com/%E6%89%8B%E5%AF%AB%E7%AD%86%E8%A8%98/javascript-new-operator-implementation-8c0d15f2b899"},"https://medium.com/\u624b\u5beb\u7b46\u8a18/javascript-new-operator-implementation-8c0d15f2b899")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"https://pjchender.blogspot.com/2016/06/javascriptfunction-constructornew.html"},"https://pjchender.blogspot.com/2016/06/javascriptfunction-constructornew.html")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"https://www.explainthis.io/zh-hant/interview-guides/javascript/most-common-js-prototype-questions"},"https://www.explainthis.io/zh-hant/interview-guides/javascript/most-common-js-prototype-questions"))))}d.isMDXComponent=!0}}]);